return {
  {
    "L3MON4D3/LuaSnip",
    opts = function(_, opts)
      local ls = require("luasnip")

      -- manter os snippets do lazyvim
      opts = vim.tbl_deep_extend("force", opts, {
        history = true,
        delete_check_events = "TextChanged",
      })

      -- LOCALS
      local s = ls.snippet
      local i = ls.insert_node
      local t = ls.text_node
      local extras = require("luasnip.extras")
      local fmt = require("luasnip.extras.fmt").fmt
      local c = ls.choice_node
      local f = ls.function_node
      local sn = ls.snippet_node
      local d = ls.dynamic_node
      local rep = extras.rep
      -- LOCALS

      -- ############################################################################
      -- ############################################################################
      --                                   LUA
      -- ############################################################################
      -- ############################################################################

      ls.add_snippets("lua", {
        s("snip", {
          t("\n"),
          t('s("'),
          i(1),
          t('",{'),
          i(2),
          t("}),"),
        }),
        s("plugn", {
          t({ "return {", "  {" }),
          t('"'),
          i(1, "plugin/name"),
          t('",'),
          t({ "", "    opts = function(" }),
          i(2, ""),
          t(")"),
          t({ "", "    end,", "  },", "}" }),
        }),
        s("plug", {
          t({
            "  {",
            '    "',
          }),
          i(1, "plugin/name"),
          t({
            '",',
            "    opts = function(",
          }),
          i(2, ""),
          t({
            ")",
            "      ",
            "    end,",
            "  },",
          }),
        }),
      })

      -- ############################################################################
      -- ############################################################################
      --                                   SH
      -- ############################################################################
      -- ############################################################################

      ls.add_snippets("sh", {
        s("alias", {
          t("alias "),
          i(1, "name"),
          t("='"),
          i(2, "command"),
          t("'"),
        }),
        s("func", {
          t("function "),
          i(1, "name"),
          t("() {"),
          t({ "", "  " }),
          i(2, ""),
          t({ "", "}" }),
        }),
      })

      -- ############################################################################
      -- ############################################################################
      --                                   PYTHON
      -- ############################################################################
      -- ############################################################################

      ls.add_snippets("python", {
        s("def", {
          t("def "),
          i(1, "function_name"),
          t("("),
          i(2, "args"),
          t({ "):", "", "    " }),
          i(0),
        }),
      })

      -- ############################################################################
      -- ############################################################################
      --                                   JAVASCRIPT
      -- ############################################################################
      -- ############################################################################

      ls.add_snippets("javascript", {
        s("func", {
          t("function "),
          i(1, "name"),
          t("("),
          i(2, "args"),
          t({ ") {", "  " }),
          i(0),
          t({ "", "}" }),
        }),
        s("arrow", {
          i(1, "args"),
          t(" => {"),
          t({ "", "  " }),
          i(0),
          t({ "", "}" }),
        }),
      })

      -- ############################################################################
      -- ############################################################################
      --                                   md
      -- ############################################################################
      -- ############################################################################

      ls.add_snippets("markdown", {
        s("link", {
          t("["),
          i(1, "text"),
          t("]("),
          i(2, "url"),
          t(")"),
        }),
        s("img", {
          t("!["),
          i(1, "alt text"),
          t("]("),
          i(2, "image url"),
          t(")"),
        }),
        s("dcode", {
          t("```"),
          i(1, "language"),
          t({ "", "" }),
          i(2, ""),
          t({ "", "```" }),
        }),
      })
      require("luasnip.loaders.from_vscode").lazy_load()
    end,
  },
}
